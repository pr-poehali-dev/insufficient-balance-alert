# ШиноПро - Локальная установка

Полностью автономная версия системы управления шиномонтажем с локальной базой данных SQLite.

## Требования

- Node.js 18+ (скачать с [nodejs.org](https://nodejs.org/))
- npm (устанавливается вместе с Node.js)

## Установка

1. **Скачайте проект:**
   ```bash
   # Если используете GitHub
   git clone <your-repo-url>
   cd <project-folder>
   
   # Или распакуйте скачанный ZIP-архив
   ```

2. **Установите зависимости:**
   ```bash
   npm install
   ```

## Запуск проекта

### Вариант 1: Запуск всего сразу (рекомендуется)

```bash
npm run dev
```

Эта команда запустит:
- **Backend сервер** на `http://localhost:3001` (API + База данных SQLite)
- **Frontend приложение** на `http://localhost:5173` (Интерфейс)

### Вариант 2: Запуск по отдельности

Откройте 2 терминала:

**Терминал 1 - Backend:**
```bash
npm run server
```

**Терминал 2 - Frontend:**
```bash
npm run client
```

## Использование

1. Откройте браузер и перейдите на `http://localhost:5173`
2. Доступные страницы:
   - `/` - Главная страница с онлайн-записью
   - `/admin` - Админ-панель (управление заказами, назначение мастеров)
   - `/master` - Панель мастера (просмотр и выполнение заказов)

## База данных

- База данных SQLite создается автоматически при первом запуске
- Файл базы данных: `server/database.db`
- При первом запуске автоматически добавляются 3 тестовых мастера:
  - Иван Петров - ул. Ленина, 45
  - Сергей Иванов - пр. Мира, 123
  - Алексей Смирнов - ул. Гагарина, 78

## Структура проекта

```
├── src/                 # Frontend (React + TypeScript)
│   ├── components/      # Компоненты интерфейса
│   ├── pages/          # Страницы приложения
│   └── lib/            # API клиент
├── server/             # Backend (Express + SQLite)
│   ├── index.ts        # API сервер
│   ├── db.ts          # Настройка базы данных
│   └── database.db     # База данных (создается автоматически)
└── README.local.md     # Эта инструкция
```

## API Endpoints

Backend предоставляет следующие API:

- `GET /api/bookings` - Получить все заказы
- `POST /api/bookings` - Создать новый заказ
- `PUT /api/bookings` - Обновить заказ (статус, мастер, заметки)
- `GET /api/masters` - Получить список мастеров
- `GET /api/masters?masterId=X` - Получить заказы конкретного мастера

## Сборка для production

```bash
npm run build
```

Готовые файлы будут в папке `dist/`

## Решение проблем

### Порт уже занят

Если порт 3001 или 5173 уже используется, измените их в файлах:
- Backend: `server/index.ts` - строка `const PORT = 3001;`
- Frontend: `vite.config.ts` - добавьте `server: { port: 5174 }`

### База данных не создается

Убедитесь, что у вас есть права на запись в папку `server/`

### Ошибка "Cannot find module"

Попробуйте переустановить зависимости:
```bash
rm -rf node_modules package-lock.json
npm install
```

## Отличия от облачной версии

**Локальная версия:**
- ✅ Работает полностью автономно
- ✅ Не требует интернета
- ✅ База данных SQLite (файл на диске)
- ✅ Простая установка и запуск

**Облачная версия (poehali.dev):**
- ✅ Доступна из любой точки мира
- ✅ PostgreSQL база данных
- ✅ Автоматические бэкапы
- ✅ Масштабируемая инфраструктура

## Поддержка

Если возникли проблемы, создайте issue в репозитории проекта.
